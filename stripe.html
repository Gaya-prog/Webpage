<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> <!-- Character encoding for the document -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Viewport settings for responsive design -->
    <title>Nanofertech Sdn Bhd</title> <!-- Title of the web page -->
    
    <!-- Favicons for different devices -->
    <link rel="icon" type="image/png" href="/icons/favicon_io/android-chrome-192x192.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/icons/favicon_io/android-chrome-512x512.png" />
    <link rel="shortcut icon" href="/icons/favicon_io/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/favicon_io/apple-touch-icon.png" />
    <link rel="manifest" href="/icons/favicon_io/site.webmanifest" /> <!-- Web app manifest -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text:ital@0;1&family=League+Spartan:wght@100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Source+Sans+3:wght@200..900&display=swap" rel="stylesheet">

    <!-- External CSS file -->
    <link rel="stylesheet" href="/dist/style.css">
    
    <!-- External JavaScript file -->
    <script src="/app/js/script.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
</head>

<body>
    <!-- Header section with top navigation -->
    <header class="topnav">
        <h4 class="visually hidden"><Header></h4> <!-- Visually hidden header for accessibility -->
        
        <!-- Wrapper for top navigation content -->
        <div class="wrapper topnav__wrapper" >
            <!-- <img src="/images/sand.JPG" alt="Sand background" class="topnav__background" /> -->
            <!-- Home link -->
            <a href="/" class="topnav__homelink hover-fade">
                <img src="/images/homepage/logo_nano-removebg-preview.png" alt="Nanofertech Homepage" class="topnav__logo" width="250" height="250"/>
            </a>

            <div class="topnav__site-tagline">Less is the New Lead to <br> Abundance </div>

            <a class="topnav__button button primary" href="stripe.html" target="_blank">Support Our Mission</a>
        </div>

        <div class="topnav__bar">
            <!-- Navigation links -->
            <nav>
                <ul class="topnav__links">
                    <li class="topnav__item topnav__dropdown">
                        <a href="about_us.html" class="topnav__dropdown-link">About Us</a>
                        <ul class="topnav__dropdown-menu">
                            <li><a href="#visi-misi">Vision & Mission</a></li>
                            <li><a href="#who-we-are">Who We Are?</a></li>
                            <li><a href="#what-we-do">What We Do?</a></li>
                            <li><a href="#why-us">Why Us?</a></li>
                            <li><a href="#lamatu">Lamatu</a></li>
                        </ul>
                    </li>
        
                    <!-- Learn dropdown -->
                    <li class="topnav__item topnav__dropdown">
                        <a href="" class="topnav__dropdown-link">Learn</a>
                        <ul class="topnav__dropdown-menu">
                            <li><a href="learn.html">The Science of Fertilizers</a></li>
                            <li><a href="history.html">Defining Agriculture through time</a></li>
                            <li><a href="sustainability.html">The Triple Bottom Line of Sustainability: People, Planet, Profit</a></li>
                            <li><a href="climate.html">Climate Change & Agriculture</a></li>
                        </ul>
                    </li>
        
                    <!-- Our Work dropdown -->
                    <li class="topnav__item topnav__dropdown">
                        <a href="" class="topnav__dropdown-link">Our Work</a>
                        <ul class="topnav__dropdown-menu">
                            <li><a href="our-work.html">Innovation</a></li>
                            <li><a href="trials.html">Fertilizer Trials</a></li>
                        </ul>
                    </li>
        
                    <!-- News & Events dropdown -->
                    <li class="topnav__item topnav__dropdown">
                        <a href="" class="topnav__dropdown-link">News & Events</a>
                        <ul class="topnav__dropdown-menu">
                            <li><a href="events.html">Upcoming Events</a></li>
                            <li><a href="news.html">Recent News</a></li>
                        </ul>
                    </li>
        
                    <!-- Support Us dropdown -->
                    <li class="topnav__item topnav__dropdown">
                        <a href="" class="topnav__dropdown-link">Support Us</a>
                        <ul class="topnav__dropdown-menu">
                            <li><a href="stripe.html">CTA</a></li>
                            <li><a href="partnership.html">Strategic Partnership</a></li>
                            <li><a href="internship.html">Internship</a></li>
                        </ul>
                    </li>
        
                    <!-- Visit Us dropdown -->
                    <li class="topnav__item topnav__dropdown">
                        <a href="" class="topnav__dropdown-link">Visit Us</a>
                        <ul class="topnav__dropdown-menu">
                            <li><a href="visit.html">Our Office</a></li>
                            <li><a href="disclaimer.html">Disclaimer</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

<body>
    <div class="donate__main-container">
        <div class="donate__description">
              <h1 class="donate__title">
                <span class="highlight-green">Call-to-action (CTA)</span>
              </h1>
              <div class="intern__image-container">
                <img class="intern__image" src="images/donation-left.jpg" alt="Intern Picture">
                <img class="intern__image" src="images/donation-middle.jpg" alt="Intern Picture">
                <img class="intern__image" src="images/donation-right.jpg" alt="Intern Picture">
                </div>

            <div class="donate__description">
              <p>
                We invite you to join us in the <span class="highlight-green">Green Horizons Initiative</span>, a collective effort to combat climate change and promote sustainable agriculture. By supporting Nanofertechâ€™s innovative CRT, a cutting-edge non-polymer coating material integrated with AI navigation, you will directly empower underserved farmers in Malaysia.
              </p>
              <p>
                Sustainable fertilization is crucial in reducing the environmental footprint of agriculture. Your donation will help us <span class="highlight-green">tackle the greenhouse gas emissions</span> primarily driven by nitrogen fertilizers, which are a major source of pollution in farming. CRT embodies the circular economy principles, <span class="highlight-green">transforming waste into valuable resources</span> and offering a sustainable solution for both the planet and farmers.
              </p>
              <p>
                Every penny donated will go directly towards supporting fertilizer trials conducted in collaboration with farmers practicing subsistence farming, otherwise defined as those who cultivate less than 0.5 hectares, growing primarily for their own consumption and selling any surplus. These trials will help demonstrate how sustainable fertilization can <span class="highlight-green">boost their productivity, protect the environment, and improve their livelihoods.</span>
              </p>
              <p>Together, <span class="highlight-green">we can create lasting change.</span> Every donation counts in this shared mission. Let's work together for a healthier climate and improved livelihoods for those who need it most. <span class="highlight-green">Your support is essential in this journey!</span></p>
              <p><strong>Donate now and be part of the change. ðŸŒ±ðŸŒŽ</strong></p>
              <label for="amount">Donation Amount (MYR) </label>
              <input type="number" id="amount" name="amount" min="1" placeholder="Enter your amount" required /> 
              <img class="donate__logo" src="images/stripelogo.webp" alt="Stripe Logo"/>
              <button id="donate-button" class="button primary donate__button">Donate</button>
              
            <form id="payment-form" style="display: none;">
                <div id="card-container">
                    <h4>Enter your card details:</h4>
                    <div id="card-element"></div>
                    <div id="card-errors" role="alert"></div>
                </div>
                <button type="submit" class="button primary donate__button">Confirm Donation</button>
            </form>
        </div>
    </div>

    <script>
        const stripe = Stripe('pk_test_51QkbVR07FUuvaDAkEVWEHpmsvZgCBISWPaEM6b1bPNvOBZlSmdhXWteoqBYmK11nHNMbPTaJoZhOK4fxySA3hgam000M7WVe2Z');
        const elements = stripe.elements();
        const card = elements.create('card');
        card.mount('#card-element');
        
        const donateButton = document.getElementById('donate-button');
        const paymentForm = document.getElementById('payment-form');
        
        donateButton.addEventListener('click', async () => {
            const amount = document.getElementById('amount').value;
            if (!amount || amount <= 0) {
                alert("Please enter a valid donation amount.");
                return;
            }

            const response = await fetch('http://localhost:3000/create-payment-intent', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ amount: amount * 100, currency: 'myr' })
            });
            const { clientSecret } = await response.json();

            paymentForm.style.display = 'block';  // Show payment form after getting clientSecret

            paymentForm.addEventListener('submit', async (event) => {
                event.preventDefault();
                const { paymentMethod, error } = await stripe.createPaymentMethod({
                    type: 'card',
                    card: card,
                });

                if (error) {
                    document.getElementById('card-errors').textContent = error.message;
                } else {
                    const confirmResponse = await stripe.confirmCardPayment(clientSecret, {
                        payment_method: paymentMethod.id,
                    });

                    if (confirmResponse.error) {
                        document.getElementById('card-errors').textContent = confirmResponse.error.message;
                    } else {
                        alert('Payment successful!');
                    }
                }
            });
        });
    </script>
</body>
</html>
